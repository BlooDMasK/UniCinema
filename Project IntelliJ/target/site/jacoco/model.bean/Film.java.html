<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Film.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">UniCinema</a> &gt; <a href="index.source.html" class="el_package">model.bean</a> &gt; <span class="el_source">Film.java</span></div><h1>Film.java</h1><pre class="source lang-java linenums">package model.bean;

import lombok.Data;
import org.json.JSONArray;
import org.json.JSONObject;
import utils.JsonSerializable;

import javax.servlet.http.Part;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.StandardCopyOption;
import java.time.LocalDate;
import java.util.ArrayList;

/**
 * Questa classe rappresenta un film.
 */
<span class="pc bnc" id="L20" title="All 100 branches missed.">@Data</span>
public class Film implements JsonSerializable {

    /**
     * Rappresenta l'identificativo numerico del film.
     */
<span class="nc" id="L26">    private int id;</span>

    /**
     * Rappresenta la durata del film.
     */
<span class="nc" id="L31">    private int length;</span>

    /**
     * Rappresenta il genere (si veda {@link #toStringGenre()} per ulteriori informazioni).
     */
<span class="nc" id="L36">    private int genre;</span>

    /**
     * Rappresenta il titolo del film.
     */
<span class="nc" id="L41">    private String title;</span>

    /**
     * Rappresenta la trama del film.
     */
<span class="nc" id="L46">    private String plot;</span>

    /**
     * Rappresenta la cover in 16:9 del film.
     */
<span class="nc" id="L51">    private String cover;</span>

    /**
     * Rappresenta la locandina del film.
     */
<span class="nc" id="L56">    private String poster;</span>

    /**
     * Rappresenta la data di pubblicazione del film.
     */
<span class="nc" id="L61">    private LocalDate datePublishing;</span>

    /**
     * Rappresenta gli attori facenti parte del cast del film.
     */
<span class="nc" id="L66">    private ArrayList&lt;Actor&gt; actorList;</span>

    /**
     * Rappresenta i registi che hanno preso parte al film.
     */
<span class="nc" id="L71">    private ArrayList&lt;Director&gt; directorList;</span>

    /**
     * Rappresenta le case produttrici che hanno preso parte al film.
     */
<span class="nc" id="L76">    private ArrayList&lt;HouseProduction&gt; houseProductionList;</span>

    /**
     * Rappresenta la produzione del film.
     */
<span class="nc" id="L81">    private ArrayList&lt;Production&gt; productionList;</span>

    /**
     * Rappresenta le recensioni fatte al film.
     */
<span class="nc" id="L86">    private ArrayList&lt;Review&gt; reviewList;</span>

    /**
     * Rappresenta gli spettacoli in cui viene proiettato il film.
     */
<span class="nc" id="L91">    private ArrayList&lt;Show&gt; showList;</span>

    /**
     * Nel costruttore vuoto vengono istanziate le liste.
     */
<span class="fc" id="L96">    public Film() {</span>
<span class="fc" id="L97">        actorList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L98">        directorList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L99">        houseProductionList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L100">        productionList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L101">        showList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L102">    }</span>

<span class="fc" id="L104">    public Film(int filmId) {</span>
<span class="fc" id="L105">        id = filmId;</span>
<span class="fc" id="L106">    }</span>

    public void addActor(Actor actor) {
<span class="nc" id="L109">        actorList.add(actor);</span>
<span class="nc" id="L110">    }</span>

    public void addDirector(Director director) {
<span class="nc" id="L113">        directorList.add(director);</span>
<span class="nc" id="L114">    }</span>

    public void addHouseProduction(HouseProduction houseProduction) {
<span class="nc" id="L117">        houseProductionList.add(houseProduction);</span>
<span class="nc" id="L118">    }</span>

    public void addProduction(Production production) {
<span class="nc" id="L121">        productionList.add(production);</span>
<span class="nc" id="L122">    }</span>

    public void addShow(Show show) {
<span class="nc" id="L125">        showList.add(show);</span>
<span class="nc" id="L126">    }</span>

    /**
     * Implementa la funzionalità che porta tutti i nomi e i cognomi dei registi in una riga.
     * @return stringa con tutti i nomi e cognomi dei registi.
     */
    public String toStringDirectors() {
<span class="nc" id="L133">        String string = &quot;&quot;;</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">        for(Director director : directorList)</span>
<span class="nc" id="L135">            string += director.getFirstname() + &quot; &quot; + director.getLastname() + &quot;, &quot;;</span>

<span class="nc" id="L137">        string = string.substring(0, string.length() - 2);</span>
<span class="nc" id="L138">        string += &quot;.&quot;;</span>
<span class="nc" id="L139">        return string;</span>
    }

    /**
     * Implementa la funzionalità che porta tutti i nomi e i cognomi degli attori in una riga.
     * @return Stringa con tutti i nomi e cognomi degli attori.
     */
    public String toStringActors() {
<span class="nc" id="L147">        String string = &quot;&quot;;</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">        for(Actor actor : actorList)</span>
<span class="nc" id="L149">            string += actor.getFirstname() + &quot; &quot; + actor.getLastname() + &quot;, &quot;;</span>

<span class="nc" id="L151">        string = string.substring(0, string.length() - 2);</span>
<span class="nc" id="L152">        string += &quot;.&quot;;</span>
<span class="nc" id="L153">        return string;</span>
    }

    /**
     * Implementa la funzionalità che converte il genere numerico del film in una stringa contenente il genere.
     * @return Stringa contenente il genere del film.
     */
    public String toStringGenre() {
<span class="nc bnc" id="L161" title="All 16 branches missed.">        switch(this.genre) {</span>
<span class="nc" id="L162">            case 1: return &quot;Animazione&quot;;</span>
<span class="nc" id="L163">            case 2: return &quot;Avventura&quot;;</span>
<span class="nc" id="L164">            case 3: return &quot;Azione&quot;;</span>
<span class="nc" id="L165">            case 4: return &quot;Biografico&quot;;</span>
<span class="nc" id="L166">            case 5: return &quot;Commedia&quot;;</span>
<span class="nc" id="L167">            case 6: return &quot;Documentario&quot;;</span>
<span class="nc" id="L168">            case 7: return &quot;Drammatico&quot;;</span>
<span class="nc" id="L169">            case 8: return &quot;Fantascienza&quot;;</span>
<span class="nc" id="L170">            case 9: return &quot;Fantasy/Fantastico&quot;;</span>
<span class="nc" id="L171">            case 10: return &quot;Guerra&quot;;</span>
<span class="nc" id="L172">            case 11: return &quot;Horror&quot;;</span>
<span class="nc" id="L173">            case 12: return &quot;Musica&quot;;</span>
<span class="nc" id="L174">            case 13: return &quot;Storico&quot;;</span>
<span class="nc" id="L175">            case 14: return &quot;Thriller&quot;;</span>
<span class="nc" id="L176">            case 15: return &quot;Western&quot;;</span>
        }
<span class="nc" id="L178">        return null;</span>
    }


    @Override
    public JSONObject toJson() {
<span class="nc" id="L184">        JSONObject root = new JSONObject();</span>
<span class="nc" id="L185">        root.put(&quot;id&quot;, id);</span>
<span class="nc" id="L186">        root.put(&quot;title&quot;, title);</span>

<span class="nc" id="L188">        JSONArray actorListJSON = new JSONArray();</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">        for(Actor actor : actorList)</span>
<span class="nc" id="L190">            actorListJSON.put(actor.toJson());</span>

<span class="nc" id="L192">        root.put(&quot;actorList&quot;, actorListJSON);</span>

<span class="nc" id="L194">        JSONArray directorListJSON = new JSONArray();</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">        for(Director director : directorList)</span>
<span class="nc" id="L196">            directorListJSON.put(director.toJson());</span>

<span class="nc" id="L198">        root.put(&quot;directorList&quot;, directorListJSON);</span>

<span class="nc" id="L200">        JSONArray productionListJSON = new JSONArray();</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">        for(Production production : productionList)</span>
<span class="nc" id="L202">            productionListJSON.put(production.toJson());</span>

<span class="nc" id="L204">        root.put(&quot;productionList&quot;, productionListJSON);</span>

<span class="nc" id="L206">        JSONArray houseProductionListJSON = new JSONArray();</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">        for(HouseProduction houseProduction : houseProductionList)</span>
<span class="nc" id="L208">            houseProductionListJSON.put(houseProduction.toJson());</span>

<span class="nc" id="L210">        root.put(&quot;houseProductionList&quot;, houseProductionListJSON);</span>

<span class="nc" id="L212">        return root;</span>
    }

    public void writeCover(String uploadPath, Part stream) {
<span class="nc" id="L216">        try(InputStream fileStream = stream.getInputStream()) {</span>
<span class="nc" id="L217">            File file = new File(uploadPath + cover);</span>
<span class="nc" id="L218">            Files.copy(fileStream, file.toPath(), StandardCopyOption.REPLACE_EXISTING);</span>
<span class="nc" id="L219">        } catch (IOException ignored) {</span>

<span class="nc" id="L221">        }</span>
<span class="nc" id="L222">    }</span>

    public void writePoster(String uploadPath, Part stream) {
<span class="nc" id="L225">        try(InputStream fileStream = stream.getInputStream()) {</span>
<span class="nc" id="L226">            File file = new File(uploadPath + poster);</span>
<span class="nc" id="L227">            Files.copy(fileStream, file.toPath(), StandardCopyOption.REPLACE_EXISTING);</span>
<span class="nc" id="L228">        } catch (IOException ignored) {</span>

<span class="nc" id="L230">        }</span>
<span class="nc" id="L231">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>